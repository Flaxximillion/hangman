<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<img onerror = getImage(1); onload=sayHello()>

<script>
    let myImage = document.querySelector('img');
    let init = {
        method: 'GET',
        cache: 'no-cache',
        mode: 'cors'
    };

    function sayHello(){
        console.log("hello");
    }

    function getImage(val){
        fetch("http://thecatapi.com/api/images/get?api_key[MTk2NzI0]&type=jpg", init)
            .then(handleErrors)
            .then(function(response){
                return response.blob();
            }).then(function(myBlob){
            let objectURL = URL.createObjectURL(myBlob);
            myImage.src = objectURL;
        }).catch(function(error){
            console.log(error);
            getImage(0);
        });
    }



    function handleErrors(response){
        if(!response.ok){
            throw Error(response.statusText);
        }
        return response;
    }

getImage();
</script>
</body>
</html>